# ç®€åŒ–å·¥ä½œæµç¨‹ / Simplified Workflow

## ğŸ¯ **è®¾è®¡ç†å¿µ**

å›å½’ç®€å•ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼š

- **GitHub Actions** - åªè´Ÿè´£æµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡
- **å‘å¸ƒæµç¨‹** - æ‰‹åŠ¨æ§åˆ¶ï¼Œçµæ´»å¯é 
- **ä¾èµ–ç®¡ç†** - è‡ªåŠ¨åŒ–æ›´æ–°ï¼ˆå¯é€‰ï¼‰

## ğŸ”§ **å½“å‰é…ç½®**

### **1. GitHub Actions (`.github/workflows/ci.yml`)**

```yaml
name: Test

on:
  push:
    branches: [main] # åªåœ¨ main åˆ†æ”¯è¿è¡Œ
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [20, 22] # æµ‹è¯•ä¸¤ä¸ª Node.js ç‰ˆæœ¬

    steps:
      - å®‰è£…ä¾èµ–
      - è¿è¡Œ pnpm run ci (åŒ…å« lint + format + typecheck + test + build)
      - æ£€æŸ¥å¯¼å‡ºé…ç½® (ä»… Node.js 20)
      - ä¸Šä¼ è¦†ç›–ç‡åˆ° Codecov (ä»… Node.js 20)
```

#### **ç‰¹ç‚¹**

- âœ… **ç®€å•é«˜æ•ˆ** - åªåšæµ‹è¯•ï¼Œä¸åšå‘å¸ƒ
- âœ… **èŠ‚çœèµ„æº** - åªåœ¨ main åˆ†æ”¯è¿è¡Œ
- âœ… **å¿«é€Ÿåé¦ˆ** - åˆå¹¶æ­¥éª¤å‡å°‘æ‰§è¡Œæ—¶é—´
- âœ… **è´¨é‡ä¿è¯** - å®Œæ•´çš„ä»£ç è´¨é‡æ£€æŸ¥

### **2. å‘å¸ƒæµç¨‹ (`package.json`)**

```json
{
  "scripts": {
    "release": "bumpp && npm publish"
  }
}
```

#### **ä½¿ç”¨æ–¹æ³•**

```bash
# æ‰‹åŠ¨å‘å¸ƒ
npm run release

# æµç¨‹ï¼š
# 1. bumpp äº¤äº’å¼é€‰æ‹©ç‰ˆæœ¬ (patch/minor/major)
# 2. è‡ªåŠ¨æ›´æ–° package.json ç‰ˆæœ¬å·
# 3. è‡ªåŠ¨åˆ›å»º git commit å’Œ tag
# 4. è‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“
# 5. è‡ªåŠ¨å‘å¸ƒåˆ° NPM
```

#### **ä¼˜åŠ¿**

- âœ… **å®Œå…¨æ§åˆ¶** - å¼€å‘è€…å†³å®šä½•æ—¶å‘å¸ƒ
- âœ… **ç‰ˆæœ¬é€‰æ‹©** - äº¤äº’å¼é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ç±»å‹
- âœ… **ç®€å•å¯é ** - ä¸€ä¸ªå‘½ä»¤å®Œæˆæ‰€æœ‰æ“ä½œ
- âœ… **æ˜“äºè°ƒè¯•** - æœ¬åœ°æ‰§è¡Œï¼Œé—®é¢˜å®¹æ˜“å®šä½

### **3. ä¾èµ–ç®¡ç† (`.github/dependabot.yml`)**

```yaml
version: 2
updates:
  - package-ecosystem: 'npm'
    directory: '/'
    schedule:
      interval: 'weekly' # æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡
```

#### **åŠŸèƒ½**

- ğŸ”„ **è‡ªåŠ¨æ£€æŸ¥** - æ¯å‘¨ä¸€æ£€æŸ¥ä¾èµ–æ›´æ–°
- ğŸ“ **è‡ªåŠ¨ PR** - å‘ç°æ›´æ–°æ—¶åˆ›å»º Pull Request
- ğŸ›¡ï¸ **å®‰å…¨æ›´æ–°** - è‡ªåŠ¨ä¿®å¤å®‰å…¨æ¼æ´
- âš™ï¸ **å¯é…ç½®** - å¯ä»¥å¿½ç•¥ç‰¹å®šä¾èµ–çš„ major æ›´æ–°

#### **æ˜¯å¦ä¿ç•™ï¼Ÿ**

- **ä¿ç•™ä¼˜åŠ¿** - å‡å°‘æ‰‹åŠ¨ç»´æŠ¤å·¥ä½œï¼ŒåŠæ—¶è·å¾—å®‰å…¨æ›´æ–°
- **åˆ é™¤ç†ç”±** - å¦‚æœä½ å–œæ¬¢å®Œå…¨æ‰‹åŠ¨æ§åˆ¶ä¾èµ–ç‰ˆæœ¬

## ğŸ“Š **ç®€åŒ–å‰åå¯¹æ¯”**

| é¡¹ç›®               | ç®€åŒ–å‰              | ç®€åŒ–å         |
| ------------------ | ------------------- | -------------- |
| **GitHub Actions** | å¤æ‚çš„ CI/CD æµç¨‹   | ç®€å•çš„æµ‹è¯•æµç¨‹ |
| **å‘å¸ƒæ–¹å¼**       | è‡ªåŠ¨å‘å¸ƒ + æ‰‹åŠ¨å‘å¸ƒ | åªæœ‰æ‰‹åŠ¨å‘å¸ƒ   |
| **é…ç½®æ–‡ä»¶**       | å¤šä¸ªå¤æ‚é…ç½®        | æœ€å°‘å¿…è¦é…ç½®   |
| **æ–‡æ¡£æ•°é‡**       | å¤šä¸ªè¯¦ç»†æ–‡æ¡£        | ä¸€ä¸ªç®€åŒ–è¯´æ˜   |
| **å­¦ä¹ æˆæœ¬**       | é«˜                  | ä½             |
| **ç»´æŠ¤æˆæœ¬**       | é«˜                  | ä½             |

## ğŸš€ **æ—¥å¸¸ä½¿ç”¨æµç¨‹**

### **å¼€å‘é˜¶æ®µ**

```bash
# 1. å¼€å‘åŠŸèƒ½
git checkout -b feature/new-feature
# ... ç¼–å†™ä»£ç  ...

# 2. æäº¤ä»£ç 
git add .
git commit -m "feat: add new feature"
git push origin feature/new-feature

# 3. åˆ›å»º PR
# GitHub è‡ªåŠ¨è¿è¡Œæµ‹è¯•
```

### **å‘å¸ƒé˜¶æ®µ**

```bash
# 1. åˆå¹¶åˆ° main åˆ†æ”¯
git checkout main
git pull origin main

# 2. å‘å¸ƒæ–°ç‰ˆæœ¬
npm run release
# äº¤äº’å¼é€‰æ‹©ç‰ˆæœ¬ç±»å‹ (patch/minor/major)
# è‡ªåŠ¨å®Œæˆç‰ˆæœ¬å‘å¸ƒå’Œ NPM å‘å¸ƒ
```

### **ç»´æŠ¤é˜¶æ®µ**

```bash
# Dependabot ä¼šè‡ªåŠ¨åˆ›å»ºä¾èµ–æ›´æ–° PR
# å®¡æŸ¥å¹¶åˆå¹¶å®‰å…¨æ›´æ–°å’Œé‡è¦æ›´æ–°
```

## ğŸ› ï¸ **å¯é€‰é…ç½®**

### **åˆ é™¤ Dependabotï¼ˆå¦‚æœä¸éœ€è¦ï¼‰**

```bash
rm .github/dependabot.yml
```

### **è‡ªå®šä¹‰å‘å¸ƒè„šæœ¬**

```json
{
  "scripts": {
    "release": "bumpp && npm publish",
    "release:patch": "bumpp patch && npm publish",
    "release:minor": "bumpp minor && npm publish",
    "release:major": "bumpp major && npm publish"
  }
}
```

### **æ·»åŠ é¢„å‘å¸ƒæ£€æŸ¥**

```json
{
  "scripts": {
    "prerelease": "npm run ci",
    "release": "bumpp && npm publish"
  }
}
```

## ğŸ¯ **é€‚ç”¨åœºæ™¯**

### **é€‚åˆçš„é¡¹ç›®**

- âœ… **ä¸ªäººé¡¹ç›®** - ç®€å•å¯æ§
- âœ… **å°å›¢é˜Ÿé¡¹ç›®** - æ²Ÿé€šæˆæœ¬ä½
- âœ… **å·¥å…·åº“** - å‘å¸ƒé¢‘ç‡ä¸é«˜
- âœ… **å­¦ä¹ é¡¹ç›®** - ä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½

### **ä¸é€‚åˆçš„é¡¹ç›®**

- âŒ **å¤§å›¢é˜Ÿé¡¹ç›®** - éœ€è¦æ›´ä¸¥æ ¼çš„æµç¨‹æ§åˆ¶
- âŒ **é«˜é¢‘å‘å¸ƒé¡¹ç›®** - æ‰‹åŠ¨å‘å¸ƒæ•ˆç‡ä½
- âŒ **ä¼ä¸šçº§é¡¹ç›®** - éœ€è¦æ›´å®Œå–„çš„ CI/CD

## ğŸ“š **ç›¸å…³å·¥å…·**

### **æ ¸å¿ƒå·¥å…·**

- [bumpp](https://github.com/antfu/bumpp) - ç‰ˆæœ¬ç®¡ç†å·¥å…·
- [GitHub Actions](https://github.com/features/actions) - CI/CD å¹³å°
- [Dependabot](https://github.com/dependabot) - ä¾èµ–æ›´æ–°å·¥å…·

### **æµ‹è¯•å·¥å…·**

- [Vitest](https://vitest.dev/) - æµ‹è¯•æ¡†æ¶
- [ESLint](https://eslint.org/) - ä»£ç æ£€æŸ¥
- [Prettier](https://prettier.io/) - ä»£ç æ ¼å¼åŒ–
- [TypeScript](https://www.typescriptlang.org/) - ç±»å‹æ£€æŸ¥

## ğŸ‰ **æ€»ç»“**

é€šè¿‡è¿™æ¬¡ç®€åŒ–ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š

- âœ… **å›å½’ç®€å•** - ç§»é™¤äº†å¤æ‚çš„è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
- âœ… **ä¸“æ³¨æ ¸å¿ƒ** - GitHub Actions åªè´Ÿè´£æµ‹è¯•
- âœ… **æ‰‹åŠ¨æ§åˆ¶** - å‘å¸ƒæ—¶æœºå’Œç‰ˆæœ¬ç±»å‹å®Œå…¨ç”±å¼€å‘è€…å†³å®š
- âœ… **æ˜“äºç†è§£** - é…ç½®ç®€å•ï¼Œæ–°æ‰‹å‹å¥½
- âœ… **ç¨³å®šå¯é ** - å‡å°‘äº†è‡ªåŠ¨åŒ–å¸¦æ¥çš„æ½œåœ¨é—®é¢˜

ç°åœ¨çš„ `lib-starter` æ¨¡æ¿æ›´ç¬¦åˆ"ç®€å•å·¥å…·åº“"çš„å®šä½ï¼Œæ—¢ä¿è¯äº†ä»£ç è´¨é‡ï¼Œåˆä¿æŒäº†ä½¿ç”¨çš„ç®€å•æ€§ï¼ğŸš€
